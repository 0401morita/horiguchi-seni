{"ast":null,"code":"import _objectSpread from \"@babel/runtime-corejs2/helpers/esm/objectSpread\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport React from 'react';\nimport Head from 'next/head';\nimport { createStore, applyMiddleware } from 'redux';\nimport { Provider } from 'react-redux';\nimport thunk from 'redux-thunk';\nimport App, { Container } from 'next/app';\nimport withRedux from 'next-redux-wrapper';\nimport '../src/styles/common.scss';\nimport reducers from '../src/reducers';\nimport { actions, closeMenu } from '../src/actions/app';\nimport Header from '../src/containers/header';\nimport Footer from '../src/components/shares/footer';\nimport RecentEntries from '../src/components/recent_entries/list';\n\nconst makeStore = () => {\n  return createStore(reducers, applyMiddleware(thunk));\n};\n\nclass MyApp extends App {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"handleScroll\", () => {\n      const scrollTop = Math.max(window.pageYOffset, document.documentElement.scrollTop, document.body.scrollTop) || 0;\n      const props = this.props;\n      const {\n        app\n      } = props.store.getState();\n\n      const updateState = _objectSpread({}, app, {\n        windows: _objectSpread({}, app.windows, {\n          scrollTop: scrollTop\n        })\n      });\n\n      this.props.store.dispatch(actions.setApp(updateState));\n    });\n\n    _defineProperty(this, \"handleResize\", () => {\n      let timer = 200;\n\n      if (timer > 0) {\n        clearTimeout(timer);\n      }\n\n      const props = this.props;\n      timer = setTimeout(function () {\n        const width = window.innerWidth;\n        const height = window.innerHeight;\n        const scrollTop = Math.max(window.pageYOffset, document.documentElement.scrollTop, document.body.scrollTop) || 0;\n        props.store.dispatch(actions.setApp({\n          windows: {\n            scrollTop: scrollTop,\n            width: width,\n            height: height,\n            vw: Math.floor(width * 0.01),\n            vh: Math.floor(height * 0.01)\n          }\n        }));\n      }, timer);\n    });\n  }\n\n  static async getInitialProps({\n    Component,\n    ctx\n  }) {\n    const pageProps = Component.getInitialProps ? await Component.getInitialProps(ctx) : {};\n    return {\n      pageProps\n    };\n  }\n\n  componentDidUpdate() {\n    this.props.store.dispatch(closeMenu());\n  }\n\n  componentDidMount() {\n    const width = window.innerWidth;\n    const height = window.innerHeight;\n    const scrollTop = Math.max(window.pageYOffset, document.documentElement.scrollTop, document.body.scrollTop) || 0;\n    this.props.store.dispatch(actions.setApp({\n      windows: {\n        scrollTop: scrollTop,\n        width: width,\n        height: height,\n        vw: Math.floor(width * 0.01),\n        vh: Math.floor(height * 0.01)\n      }\n    }));\n    document.addEventListener('scroll', this.handleScroll, false);\n    window.addEventListener('resize', this.handleResize, false);\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('scroll', this.handleScroll);\n    window.removeEventListener('resize', this.handleScroll);\n  }\n\n  render() {\n    const {\n      Component,\n      pageProps,\n      store\n    } = this.props;\n    return React.createElement(Container, null, React.createElement(Provider, {\n      store: store\n    }, React.createElement(Head, null, React.createElement(\"title\", {\n      key: \"title\"\n    }, \"\\u682A\\u5F0F\\u4F1A\\u793E \\u5800\\u53E3\\u7E4A\\u7DAD\\u5DE5\\u696D\"), React.createElement(\"meta\", {\n      name: \"viewport\",\n      content: \"width=device-width,minimum-scale=1,initial-scale=1,minimal-ui\"\n    }), React.createElement(\"meta\", {\n      name: \"apple-mobile-web-app-capable\",\n      content: \"yes\"\n    })), React.createElement(\"div\", {\n      className: \"wrapper\"\n    }, React.createElement(Header, null), React.createElement(Component, pageProps), React.createElement(\"section\", {\n      className: \"section sectionRecentEntries\"\n    }, React.createElement(\"div\", {\n      className: \"row\"\n    }, React.createElement(\"div\", {\n      className: \"col-md-5\"\n    }, React.createElement(\"div\", {\n      className: \"section-heading\"\n    }, React.createElement(\"h3\", {\n      className: \"section-title\"\n    }, React.createElement(\"span\", {\n      className: \"ja\"\n    }, \"\\u304A\\u77E5\\u3089\\u305B\"), React.createElement(\"span\", {\n      className: \"en\"\n    }, \"News and Column\")))), React.createElement(\"div\", {\n      className: \"col-md-7\"\n    }, React.createElement(RecentEntries, null))))), React.createElement(Footer, null)));\n  }\n\n}\n\nexport default withRedux(makeStore)(MyApp);","map":null,"metadata":{},"sourceType":"module"}