{"ast":null,"code":"import actionCreatorFactory from 'typescript-fsa';\nimport { parse, stringify } from 'query-string';\nimport axiosBase from 'axios';\n//import { Dispatch } from 'redux';\n//import { CommonState } from '../reducers/common';\n\n/*\n * Action Setting\n */\nconst axios = axiosBase.create({\n  baseURL: 'https://wp.horiguchi-seni.com/',\n  headers: {\n    'Content-Type': 'application/json'\n  }\n});\nconst actionCreator = actionCreatorFactory(); //\n// Actions\n//\n\nexport const actions = {\n  setWp: actionCreator('SET_WP'),\n  setWpPost: actionCreator('SET_WP_POST'),\n  setWpPosts: actionCreator('SET_WP_POSTS'),\n  setWpPostsHeaders: actionCreator('SET_WP_POSTS_HEADERS')\n}; //\n// Get Post By Slug\n//\n\nexport const getWpPostBySlug = slug => {\n  return (dispatch, getState) => {\n    axios.get(`/wp-json/wp/v2/posts/?_embed&slug=${slug}`).then(({\n      status,\n      data\n    }) => {\n      console.log(data[0]);\n\n      if (status === 200 && data.length) {\n        dispatch(actions.setWpPost(data[0]));\n      }\n    }).catch(({\n      response\n    }) => {});\n  };\n}; //\n// Get Posts\n//\n\nexport const getWpPosts = () => {\n  return (dispatch, getState) => {\n    let url = '/wp-json/wp/v2/posts/?_embed';\n    const search = location.search;\n    const parseSearch = parse(search);\n\n    if (parseSearch.page) {\n      url += '&' + stringify(parseSearch);\n    }\n\n    dispatch(actions.setWp({\n      isLoading: true,\n      isError: false\n    }));\n    axios.get(url).then(res => {\n      const {\n        status,\n        data,\n        headers,\n        config\n      } = res;\n\n      if (status === 200 && data.length) {\n        dispatch(actions.setWpPostsHeaders(headers));\n        dispatch(actions.setWpPosts(data));\n      }\n    }).catch(res => {\n      dispatch(actions.setWp({\n        isError: true\n      }));\n    }).finally(() => {\n      setTimeout(() => {\n        dispatch(actions.setWp({\n          isLoading: false\n        }));\n      }, 500);\n    });\n  };\n};","map":null,"metadata":{},"sourceType":"module"}