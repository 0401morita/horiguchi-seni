{"ast":null,"code":"import actionCreatorFactory from 'typescript-fsa';\nimport { parse, stringify } from 'query-string';\nimport axiosBase from 'axios';\n//import { Dispatch } from 'redux';\n//import { CommonState } from '../reducers/common';\n\n/*\n * Action Setting\n */\nvar axios = axiosBase.create({\n  baseURL: 'https://wp.horiguchi-seni.com/',\n  headers: {\n    'Content-Type': 'application/json'\n  }\n});\nvar actionCreator = actionCreatorFactory(); //\n// Actions\n//\n\nexport var actions = {\n  setWp: actionCreator('SET_WP'),\n  setWpPost: actionCreator('SET_WP_POST'),\n  setWpPosts: actionCreator('SET_WP_POSTS'),\n  setWpPostsHeaders: actionCreator('SET_WP_POSTS_HEADERS')\n}; //\n// Get Post By Slug\n//\n\nexport var getWpPostBySlug = function getWpPostBySlug(slug) {\n  return function (dispatch, getState) {\n    axios.get(\"/wp-json/wp/v2/posts/?_embed&slug=\".concat(slug)).then(function (_ref) {\n      var status = _ref.status,\n          data = _ref.data;\n      console.log(data[0]);\n\n      if (status === 200 && data.length) {\n        dispatch(actions.setWpPost(data[0]));\n      }\n    }).catch(function (_ref2) {\n      var response = _ref2.response;\n    });\n  };\n}; //\n// Get Posts\n//\n\nexport var getWpPosts = function getWpPosts() {\n  return function (dispatch, getState) {\n    var url = '/wp-json/wp/v2/posts/?_embed';\n    var search = location.search;\n    var parseSearch = parse(search);\n\n    if (parseSearch.page) {\n      url += '&' + stringify(parseSearch);\n    }\n\n    dispatch(actions.setWp({\n      isLoading: true,\n      isError: false\n    }));\n    axios.get(url).then(function (res) {\n      var status = res.status,\n          data = res.data,\n          headers = res.headers,\n          config = res.config;\n\n      if (status === 200 && data.length) {\n        dispatch(actions.setWpPostsHeaders(headers));\n        dispatch(actions.setWpPosts(data));\n      }\n    }).catch(function (res) {\n      dispatch(actions.setWp({\n        isError: true\n      }));\n    }).finally(function () {\n      setTimeout(function () {\n        dispatch(actions.setWp({\n          isLoading: false\n        }));\n      }, 500);\n    });\n  };\n};","map":null,"metadata":{},"sourceType":"module"}