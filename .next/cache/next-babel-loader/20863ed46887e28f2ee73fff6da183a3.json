{"ast":null,"code":"import actionCreatorFactory from 'typescript-fsa';\nimport { parse, stringify } from 'query-string';\nimport axiosBase from 'axios';\n//import { Dispatch } from 'redux';\n//import { CommonState } from '../reducers/common';\n\n/*\n * Action Setting\n */\nvar axios = axiosBase.create({\n  baseURL: 'https://wp.horiguchi-seni.com/',\n  headers: {\n    'Content-Type': 'application/json'\n  }\n});\nvar actionCreator = actionCreatorFactory(); //\n// Actions\n//\n\nexport var actions = {\n  setWp: actionCreator('SET_WP'),\n  setWpPost: actionCreator('SET_WP_POST'),\n  setWpPosts: actionCreator('SET_WP_POSTS'),\n  setWpPostsHeaders: actionCreator('SET_WP_POSTS_HEADERS')\n}; //\n// Get Post By Slug\n//\n\nexport var getWpPostBySlug = function getWpPostBySlug(slug) {\n  return function (dispatch, getState) {\n    axios.get(\"/wp-json/wp/v2/posts/?_embed&slug=\".concat(slug)).then(function (_ref) {\n      var status = _ref.status,\n          data = _ref.data;\n      console.log(data[0]);\n\n      if (status === 200 && data.length) {\n        dispatch(actions.setWpPost(data[0]));\n      }\n    }).catch(function (_ref2) {\n      var response = _ref2.response;\n    });\n  };\n}; //\n// Get Posts\n//\n\nexport var getWpPosts = function getWpPosts() {\n  return function (dispatch, getState) {\n    var url = '/wp-json/wp/v2/posts/?_embed';\n    var search = location.search;\n    var parseSearch = parse(search);\n\n    if (parseSearch.page) {\n      url += '&' + stringify(parseSearch);\n    }\n\n    dispatch(actions.setWp({\n      isLoading: true,\n      isError: false\n    }));\n    axios.get(url).then(function (res) {\n      var status = res.status,\n          data = res.data,\n          headers = res.headers,\n          config = res.config;\n\n      if (status === 200 && data.length) {\n        dispatch(actions.setWpPostsHeaders(headers));\n        dispatch(actions.setWpPosts(data));\n      }\n    }).catch(function (res) {\n      dispatch(actions.setWp({\n        isError: true\n      }));\n    }).finally(function () {\n      setTimeout(function () {\n        dispatch(actions.setWp({\n          isLoading: false\n        }));\n      }, 500);\n    });\n  };\n};","map":{"version":3,"sources":["/Applications/XAMPP/xamppfiles/htdocs/horiguchi-seni.com/src/actions/wp.ts"],"names":["actionCreatorFactory","parse","stringify","axiosBase","axios","create","baseURL","headers","actionCreator","actions","setWp","setWpPost","setWpPosts","setWpPostsHeaders","getWpPostBySlug","slug","dispatch","getState","get","then","status","data","console","log","length","catch","response","getWpPosts","url","search","location","parseSearch","page","isLoading","isError","res","config","finally","setTimeout"],"mappings":"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","sourcesContent":["import actionCreatorFactory from 'typescript-fsa';\nimport { Dispatch } from 'redux';\nimport { parse, stringify } from 'query-string';\nimport axiosBase from 'axios';\nimport { State } from '../reducers';\n//import { Dispatch } from 'redux';\n//import { CommonState } from '../reducers/common';\n/*\n * Action Setting\n */\nconst axios = axiosBase.create({\n  baseURL: 'https://wp.horiguchi-seni.com/',\n  headers: {\n    'Content-Type': 'application/json'\n  }\n});\nconst actionCreator = actionCreatorFactory();\n//\n// Actions\n//\nexport const actions = {\n  setWp: actionCreator<{ [key: string]: any }>('SET_WP'),\n  setWpPost: actionCreator<{ [key: string]: any }>('SET_WP_POST'),\n  setWpPosts: actionCreator<{ [key: string]: any }>('SET_WP_POSTS'),\n  setWpPostsHeaders: actionCreator<any>('SET_WP_POSTS_HEADERS')\n};\n//\n// Get Post By Slug\n//\nexport const getWpPostBySlug = (slug: string) => {\n  return (dispatch: Dispatch, getState: () => State) => {\n    axios\n      .get(`/wp-json/wp/v2/posts/?_embed&slug=${slug}`)\n      .then(({ status, data }) => {\n        console.log(data[0]);\n        if (status === 200 && data.length) {\n          dispatch(actions.setWpPost(data[0]));\n        }\n      })\n      .catch(({ response }) => {});\n  };\n};\n//\n// Get Posts\n//\nexport const getWpPosts = () => {\n  return (dispatch: Dispatch, getState: () => State) => {\n    let url = '/wp-json/wp/v2/posts/?_embed';\n    const search = location.search;\n    const parseSearch = parse(search);\n    if (parseSearch.page) {\n      url += '&' + stringify(parseSearch);\n    }\n    dispatch(\n      actions.setWp({\n        isLoading: true,\n        isError: false\n      })\n    );\n\n    axios\n      .get(url)\n      .then(res => {\n        const { status, data, headers, config } = res;\n        if (status === 200 && data.length) {\n          dispatch(actions.setWpPostsHeaders(headers));\n          dispatch(actions.setWpPosts(data));\n        }\n      })\n      .catch(res => {\n        dispatch(\n          actions.setWp({\n            isError: true\n          })\n        );\n      })\n      .finally(() => {\n        setTimeout(() => {\n          dispatch(\n            actions.setWp({\n              isLoading: false\n            })\n          );\n        }, 500);\n      });\n  };\n};\n"]},"metadata":{},"sourceType":"module"}