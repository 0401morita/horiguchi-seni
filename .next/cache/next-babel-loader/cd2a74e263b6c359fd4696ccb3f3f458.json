{"ast":null,"code":"import actionCreatorFactory from 'typescript-fsa';\nimport { parse, stringify } from 'query-string';\nimport axiosBase from 'axios';\n//import { Dispatch } from 'redux';\n//import { CommonState } from '../reducers/common';\n\n/*\n * Action Setting\n */\nconst axios = axiosBase.create({\n  baseURL: 'https://wp.horiguchi-seni.com/',\n  headers: {\n    'Content-Type': 'application/json'\n  }\n});\nconst actionCreator = actionCreatorFactory(); //\n// Actions\n//\n\nexport const actions = {\n  setWp: actionCreator('SET_WP'),\n  setWpPost: actionCreator('SET_WP_POST'),\n  setWpPosts: actionCreator('SET_WP_POSTS'),\n  setWpPostsHeaders: actionCreator('SET_WP_POSTS_HEADERS')\n}; //\n// Get Post By Slug\n//\n\nexport const getWpPostBySlug = slug => {\n  return (dispatch, getState) => {\n    axios.get(`/wp-json/wp/v2/posts/?_embed&slug=${slug}`).then(({\n      status,\n      data\n    }) => {\n      console.log(data);\n\n      if (status === 200 && data.length) {\n        dispatch(actions.setWpPost(data[0]));\n      }\n    }).catch(({\n      response\n    }) => {});\n  };\n}; //\n// Get Posts\n//\n\nexport const getWpPosts = () => {\n  return (dispatch, getState) => {\n    let url = '/wp-json/wp/v2/posts/?_embed';\n    const search = location.search;\n    const parseSearch = parse(search);\n\n    if (parseSearch.page) {\n      url += '&' + stringify(parseSearch);\n    }\n\n    dispatch(actions.setWp({\n      isLoading: true,\n      isError: false\n    }));\n    axios.get(url).then(res => {\n      const {\n        status,\n        data,\n        headers,\n        config\n      } = res;\n\n      if (status === 200 && data.length) {\n        dispatch(actions.setWpPostsHeaders(headers));\n        dispatch(actions.setWpPosts(data));\n      }\n    }).catch(res => {\n      dispatch(actions.setWp({\n        isError: true\n      }));\n    }).finally(() => {\n      setTimeout(() => {\n        dispatch(actions.setWp({\n          isLoading: false\n        }));\n      }, 500);\n    });\n  };\n};","map":{"version":3,"sources":["/Applications/XAMPP/xamppfiles/htdocs/horiguchi-seni.com/src/actions/wp.ts"],"names":["actionCreatorFactory","parse","stringify","axiosBase","axios","create","baseURL","headers","actionCreator","actions","setWp","setWpPost","setWpPosts","setWpPostsHeaders","getWpPostBySlug","slug","dispatch","getState","get","then","status","data","console","log","length","catch","response","getWpPosts","url","search","location","parseSearch","page","isLoading","isError","res","config","finally","setTimeout"],"mappings":"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","sourcesContent":["import actionCreatorFactory from 'typescript-fsa';\nimport { Dispatch } from 'redux';\nimport { parse, stringify } from 'query-string';\nimport axiosBase from 'axios';\nimport { State } from '../reducers';\n//import { Dispatch } from 'redux';\n//import { CommonState } from '../reducers/common';\n/*\n * Action Setting\n */\nconst axios = axiosBase.create({\n  baseURL: 'https://wp.horiguchi-seni.com/',\n  headers: {\n    'Content-Type': 'application/json'\n  }\n});\nconst actionCreator = actionCreatorFactory();\n//\n// Actions\n//\nexport const actions = {\n  setWp: actionCreator<{ [key: string]: any }>('SET_WP'),\n  setWpPost: actionCreator<{ [key: string]: any }>('SET_WP_POST'),\n  setWpPosts: actionCreator<{ [key: string]: any }>('SET_WP_POSTS'),\n  setWpPostsHeaders: actionCreator<any>('SET_WP_POSTS_HEADERS')\n};\n//\n// Get Post By Slug\n//\nexport const getWpPostBySlug = (slug: string) => {\n  return (dispatch: Dispatch, getState: () => State) => {\n    axios\n      .get(`/wp-json/wp/v2/posts/?_embed&slug=${slug}`)\n      .then(({ status, data }) => {\n        console.log(data);\n        if (status === 200 && data.length) {\n          dispatch(actions.setWpPost(data[0]));\n        }\n      })\n      .catch(({ response }) => {});\n  };\n};\n//\n// Get Posts\n//\nexport const getWpPosts = () => {\n  return (dispatch: Dispatch, getState: () => State) => {\n    let url = '/wp-json/wp/v2/posts/?_embed';\n    const search = location.search;\n    const parseSearch = parse(search);\n    if (parseSearch.page) {\n      url += '&' + stringify(parseSearch);\n    }\n    dispatch(\n      actions.setWp({\n        isLoading: true,\n        isError: false\n      })\n    );\n\n    axios\n      .get(url)\n      .then(res => {\n        const { status, data, headers, config } = res;\n        if (status === 200 && data.length) {\n          dispatch(actions.setWpPostsHeaders(headers));\n          dispatch(actions.setWpPosts(data));\n        }\n      })\n      .catch(res => {\n        dispatch(\n          actions.setWp({\n            isError: true\n          })\n        );\n      })\n      .finally(() => {\n        setTimeout(() => {\n          dispatch(\n            actions.setWp({\n              isLoading: false\n            })\n          );\n        }, 500);\n      });\n  };\n};\n"]},"metadata":{},"sourceType":"module"}